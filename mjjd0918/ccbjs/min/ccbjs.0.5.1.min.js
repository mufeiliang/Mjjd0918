/*! ccbjs - v0.5.1 - 2014-09-14
* undefined
* Copyright (c) 2014 ; Licensed  */
this.ccb=this.ccb||{},function(){ccb.version="0.1.1",ccb.global=window,ccb.useMouseMove=!1,ccb.$=function(t){return"#"==t.charAt(0)?document.getElementById(t.substr(1)):document.getElementsByTagName(t)},ccb.$new=function(t){return document.createElement(t)},ccb.canvas=document.createElement("canvas"),ccb.ctx=ccb.canvas.getContext("2d"),ccb.radianToDegree=function(t){return t*(180/Math.PI)},ccb.degreeToRadian=function(t){return Math.PI*t/180},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,12.5)}}(),ccb.screenAdjust={Ratio:"Ratio",Fill:"Fill",Custom:"Custom"},ccb.getScreenSize=function(){var t=window.document.documentElement.clientWidth,e=window.document.documentElement.clientHeight;return{width:t,height:e}},window.addEventListener("resize",function(){ccb.stage&&ccb.stage._isAutoAdjustToBrowser&&ccb.stage.adjustToBrowser(ccb.stage._AdjustType)}),Function.prototype.bind=function(t){var e=this;return function(){var i=Array.prototype.slice.call(arguments);return e.apply(t||null,i)}},ccb.hitTrianglePoint=function(t,e,i){return 0>(e.x-t.x)*(e.y+t.y)+(i.x-e.x)*(i.y+e.y)+(t.x-i.x)*(t.y+i.y)?1:0},ccb.hitPoint=function(t,e,i,n){var s=ccb.hitTrianglePoint(t,e,i),a=ccb.hitTrianglePoint(n,e,i),c=ccb.hitTrianglePoint(t,e,n),o=ccb.hitTrianglePoint(t,n,i);return a==s&&c==s&&o==s?!0:!1},ccb.isHitObj=function(t,e){var i={x:e.x-e.width/2,y:e.y-e.height/2},n={x:e.x+e.width/2,y:e.y-e.height/2},s={x:e.x+e.width/2,y:e.y+e.height/2},a={x:e.x-e.width/2,y:e.y+e.height/2};return ccb.hitPoint(i,n,s,t)||ccb.hitPoint(i,s,a,t)},ccb.getElementOffset=function(t){for(var e=t.offsetLeft,i=t.offsetTop;(t=t.offsetParent)&&t!=document.body&&t!=document;)e+=t.offsetLeft,i+=t.offsetTop;return{left:e,top:i}}}(),function(t){function e(t,e){t.toString=function(){return e}}function i(t,e){t.toString=function(){return e}}function n(t,e){t.prototype.toString=function(){return e}}var s=function(t,e,a){var c,o,r,h,l;return 2>arguments.length&&(e=t,t=""),c=e.Extends||null,delete e.Extends,o=e.Implements||null,delete e.Implements,h=e.initialize||null,delete e.initialize,h||(h=c?function(){c.apply(this,arguments)}:function(){}),r=t.substr(t.lastIndexOf(".")+1),l=Function("initialize","return function "+r+"() { initialize.apply(this, arguments); }")(h),i(l,t),s.inherit(l,c),s.implement(l,o),n(l,t),s.extend(l,e,!0),a||s.namespace(t,l),l};s.augment=function(t,i,n){var s,a,c,o,r;for(s in i)i.hasOwnProperty(s)&&(c=t.hasOwnProperty(s),(n||!c)&&(a=t[s]=i[s],"function"==typeof a&&(o=i.toString===Object.prototype.toString,r=o?t.constructor:i.constructor,e(a,r+"::"+s))))},s.extend=function(t,e,i){e.STATIC&&(t.Super&&s.augment(t,t.Super._STATIC_,!0),s.augment(t,e.STATIC,!0),t._STATIC_=e.STATIC,delete e.STATIC),s.augment(t.prototype,e,i)},s.inherit=function(t,e){if(e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.Super=e,s.extend(t,e,!1)}},s.implement=function(t,e){if(e){var i;for("function"==typeof e&&(e=[e]),i=0;e.length>i;i+=1)s.augment(t.prototype,e[i].prototype,!1)}},s.namespace=function(e,i){if(t.define===void 0){var n,s,a,c,o;for(n=e.split("."),s=n[n.length-1],a=t,o=0;n.length-1>o;o+=1)c=n[o],a[c]===void 0&&(a[c]={}),a=a[c];a[s]=i}},t.Class=s}(window),function(){ccb.Event=Class({STATIC:{KEY_DOWN:"keydown",KEY_UP:"keyup",KEY_PRESS:"keypress",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_MOVE:"mousemove",Enter_Frame:"enterFrame"},type:"",bubbles:null,target:null,removed:null,initialize:function(t,e){this.type=t||"",this.bubbles=e||!1,this.removed=!1},remove:function(){this.removed=!0}})}(),function(){ccb.EventDispatcher=Class({eventList:null,initialize:function(){this.eventList={}},addEventListener:function(t,e){null==this.eventList&&(this.eventList={});var i=this.eventList[t];if(i){var n=i.indexOf(e);if(n>-1)return}else i=this.eventList[t]=[];i.push(e)},removeEventListener:function(t,e){if(this.eventList){var i=this.eventList[t];if(i)for(var n=0;i.length>n;n++)if(i[n]===e)return i.splice(n,1),void 0}},dispatchEvent:function(t,e){if("string"==typeof t){var i=this.eventList;if(!i||!i[t])return!1;t=new ccb.Event(t,!1)}t.target=e||this,this._dispatchEvent(t)},_dispatchEvent:function(t){var e,i=this.eventList;if(t&&i){var n=i[t.type];if(!n||!(e=n.length))return;t.removed=!1,n=n.slice();for(var s=0;e>s;s++){var a=n[s];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.removeEventListener(t.type,a),t.removed=!1)}}}})}(),function(){ccb.KeyBoardEvent=Class({Extends:ccb.Event,initialize:function(t,e){this.type=t||"",this.bubbles=e||!1,this.removed=!1},timeStamp:(new Date).getTime()})}(),ccb.KEY={MOUSE1:-1,MOUSE2:-3,MWHEEL_UP:-4,MWHEEL_DOWN:-5,BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190},function(){ccb.MouseEvent=Class({Extends:ccb.Event,stageX:0,stageY:0,initialize:function(t,e,i,n){this.type=t||"",this.bubbles=e||!1,this.removed=!1,this.stageX=i,this.stageY=n}})}(),function(){ccb.Blend=Class({STATIC:{DEFAULT:"source-over",S_OVER:"source-over",S_ATOP:"source-atop",LIGHTER:"lighter",S_IN:"source-in",S_OUT:"source-out",D_OVER:"destination-over",D_ATOP:"destination-atop",D_IN:"destination-in",D_OUT:"destination-out"}})}(),function(){ccb.Stage=Class({Extends:ccb.EventDispatcher,STATIC:{stageWidth:480,stageHeight:960,mouseX:0,mouseY:0,scalX:1,scalY:1,canvas:null,ctx:null,backGround:"#000"},displayList:null,bufferList:null,_initData:function(){this.displayList=[]},initialize:function(t,e,i){this._initData(),ccb.Stage.stageWidth=this.stageWidth=e,ccb.Stage.stageHeight=this.stageHeight=i,ccb.Stage.canvas=document.getElementById(t),this.size(e,i),this.zoom(1.3,1.3),ccb.Stage.ctx=ccb.Stage.canvas.getContext("2d"),ccb.Stage.ctx.fillStyle=ccb.Stage.backGround,ccb.onFrame=this.onDrawFrame.bind(this),ccb.onMouseEventHandle=this.onMouseEventHandle.bind(this),ccb.onKeyBoardEventHandle=this.onKeyBoardEventHandle.bind(this),ccb.Stage.canvas.addEventListener("mousedown",ccb.onMouseEventHandle,!1),ccb.Stage.canvas.addEventListener("mouseup",ccb.onMouseEventHandle,!1),ccb.Stage.canvas.addEventListener("mousemove",ccb.onMouseEventHandle,!1),ccb.Stage.canvas.addEventListener("touchstart",ccb.onMouseEventHandle,!1),ccb.Stage.canvas.addEventListener("touchend",ccb.onMouseEventHandle,!1),ccb.Stage.canvas.addEventListener("touchmove",ccb.onMouseEventHandle,!1),this.onDrawFrame()},useKeyBordEvent:function(t){t?(document.addEventListener("keydown",ccb.onKeyBoardEventHandle,!1),document.addEventListener("keyup",ccb.onKeyBoardEventHandle,!1)):(document.removeEventListener("keydown",ccb.onKeyBoardEventHandle,!1),document.removeEventListener("keyup",ccb.onKeyBoardEventHandle,!1))},addChild:function(t){var e=this.displayList.indexOf(t);e>-1?(this.displayList.splice(e,1),this.displayList.push(t)):(t.parent=this,this.displayList.push(t))},removeChild:function(t){var e=this.displayList.indexOf(t);return e>-1?(this.displayList.splice(e,1),!0):!1},size:function(t,e){ccb.Stage.canvas.width=t,ccb.Stage.canvas.height=e},zoom:function(t,e){ccb.Stage.scaleX=t,ccb.Stage.scaleY=e,ccb.Stage.canvas.style.width=this.stageWidth*t+"px",ccb.Stage.canvas.style.height=this.stageHeight*e+"px"},adjustToBrowser:function(t){var e=this.stageWidth,i=this.stageHeight;switch(sW=ccb.getScreenSize().width,sH=ccb.getScreenSize().height,gameRatio=e/i,screenRatio=sW/sH,scaleX=1,scaleY=1,this._AdjustType!=t&&(this._AdjustType=t),t){case ccb.screenAdjust.Ratio:scaleX=scaleY=gameRatio>screenRatio?sW/e:sH/i;break;case ccb.screenAdjust.Fill:scaleX=sW/e,scaleY=sH/i;break;case ccb.screenAdjust.Custom:if(this.CustomAutoAdjustToBrowser){var n={Width:ccb.getScreenSize().width,Height:ccb.getScreenSize().height},s={Width:ccb.stage.stageWidth,Height:ccb.stage.stageHeight};ccb.stage.CustomAutoAdjustToBrowser.apply(ccb.stage,[{Screen:n,Original:s}])}break;default:scaleX=scaleY=gameRatio>screenRatio?sW/e:sH/i}t!=ccb.screenAdjust.Custom&&this.zoom(scaleX,scaleY)},CustomAutoAdjustToBrowser:null,setCustomAdjust:function(t){t&&(this._isCustomAdjust=!0,this.CustomAutoAdjustToBrowser=t)},_isAutoAdjustToBrowser:!0,setAutoAdjustToBrowser:function(t){this._isAutoAdjustToBrowser=t},onKeyBoardEventHandle:function(t){t.preventDefault();var e;switch(t.type){case"keydown":e=ccb.Event.KEY_DOWN;break;case"keyup":e=ccb.Event.KEY_UP;break;case"keypress":e=ccb.Event.KEY_PRESS}this.dispatchEvent(t,this)},onMouseEventHandle:function(t){t.preventDefault();var e=null;switch(t.type){case"mousedown":case"touchstart":e=ccb.Event.MOUSE_DOWN;break;case"mouseup":case"touchend":e=ccb.Event.MOUSE_UP;break;case"mousemove":case"touchmove":e=ccb.Event.MOUSE_MOVE}var i=ccb.getElementOffset(ccb.Stage.canvas);"touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type?"touchend"!=t.type&&(this.tx=t.touches[0].pageX,this.ty=t.touches[0].pageY):(this.tx=t.pageX,this.ty=t.pageY),ccb.Stage.mouseX=(this.tx-i.left)/ccb.Stage.scaleX,ccb.Stage.mouseY=(this.ty-i.top)/ccb.Stage.scaleY;for(var n=new ccb.MouseEvent(e,!1,ccb.Stage.mouseX,ccb.Stage.mouseY),s=this.displayList.length-1;s>=0;s--){var a=this.displayList[s];if(a.childen)for(var c=a.childen.length-1;c>=0;c--)if(a.childen[c].mouseEnabled){var o=ccb.isHitObj({x:ccb.Stage.mouseX-a.x,y:ccb.Stage.mouseY-a.y},a.childen[c]);if(o){a.childen[c].dispatchEvent(n);break}}if(a.mouseEnabled){var o=ccb.isHitObj({x:ccb.Stage.mouseX,y:ccb.Stage.mouseY},a);if(o){a.dispatchEvent(n);break}}}this.dispatchEvent(n,a),t.stopPropagation(),t.preventDefault()},onDrawFrame:function(){ccb.Stage.ctx.fillRect(0,0,ccb.Stage.stageWidth,ccb.Stage.stageHeight),this.dispatchEvent(ccb.Event.Enter_Frame);for(var t=0;this.displayList.length>t;t++)this.displayList[t].pain&&this.displayList[t].pain();window.requestAnimFrame(ccb.onFrame)}})}(),function(){ccb.DisplayObject=Class({Extends:ccb.EventDispatcher,x:0,y:0,width:0,height:0,alpha:1,rotation:0,scaleX:1,scaleY:1,skewX:0,skewY:0,name:"",_visible:!0,_userDate:null,pivotX:0,pivotY:0,_center:!1,setCenter:function(t){this._center=t},getCenter:function(){return this._center},setPivotX:function(t){this.pivotY=t},setPivotY:function(t){this.pivotY=t},getPivotX:function(){return this.pivotY},getPivotY:function(){return this.pivotY},getUserData:function(){return this._userDate},setUserData:function(t){this._userDate=t},getVisible:function(){return this._visible},setVisible:function(t){this._visible=t},getMouseEnabled:function(){return this.m_mouseEnabled},setMouseEnabled:function(t){this.m_mouseEnabled=t}})}(),function(){ccb.Sprite=Class({Extends:ccb.DisplayObject,STATIC:{},parent:null,texture:null,nameId:0,offsetX:0,offsetY:0,frameWidth:0,frameHeight:0,mFrameWidth:0,mFrameHeight:0,cropX:0,cropY:0,curFrame:0,framesCount:1,frameFPS:10,animationTime:0,blend:"source-over",animationData:null,childen:null,isPlay:!1,frameTime:0,animationFPS:10,loop:!1,mouseEnabled:!1,_userData:null,_scriptList:null,initialize:function(t,e){this._init(t,e)},_init:function(t,e){this.texture=t,this.animationData=e,this.frameWidth=this.width=t.width,this.frameHeight=this.height=t.height,this.blend="source-over",this.setCenter(!0),this._center||(this.pivotX=-this.mFrameWidth/2,this.pivotY=-this.mFrameHeight/2),this.childen=[]},setTileName:function(t){this.nameId=this.getNameId(t),this.updateFrameData(0)},getTilName:function(){return this.animationData[this.nameId].name},getNameId:function(t){for(var e=0;this.animationData.length>e;e++)if(this.animationData[e].name==t)return e;return 0},play:function(){this.isPlay=!0},stop:function(){this.isPlay=!1},gotoAndPlay:function(t){(1>t||t>this.framesCount)&&(t=1),this.curFrame=t-2,this.play()},gotoAndStop:function(t){(1>t||t>this.framesCount)&&(t=1),this.curFrame=t-1,this.updateFrameData(this.curFrame),this.stop()},addFrameScript:function(t){this._scriptList.push(t)},removeFrameScript:function(t){var e=this._scriptList.indexOf(t);this._scriptList.splice(e,1)},removeAllFrameScript:function(){for(var t=0;this._scriptList.length>t;t++)this._scriptList[t]=null;this._scriptList=[]},addChild:function(t){t instanceof ccb.DisplayObject&&(t.parent=this,this.childen.push(t))},removeChild:function(t){var e=this.childen.indexOf(t);this.childen.splice(e,1)},removeAllChilden:function(){for(var t=0;this.childen.length>t;t++)this.childen[t].dispose&&this.childen[t].dispose(),this.childen[t]=null},updateData:function(){if(this._visible)if(this.animationData){if(this.isPlay){var t=Date.now();if(!((t-this.animationTime)*this.frameFPS>1e3))return;this.animationTime=t,this.curFrame++,this.curFrame>=this.framesCount&&(this.loop?this.curFrame=0:(this.curFrame=this.framesCount-1,this.stop())),this.updateFrameData(this.curFrame)}}else this.mFrameWidth=this.frameWidth,this.mFrameHeight=this.frameHeight,this.width=this.frameWidth*this.scaleX,this.height=this.frameHeight*this.scaleY},updateFrameData:function(t){this.cropX=this.animationData[this.nameId].frameList[t].x,this.cropY=this.animationData[this.nameId].frameList[t].y,this.frameWidth=this.animationData[this.nameId].frameList[t].width,this.frameHeight=this.animationData[this.nameId].frameList[t].height,this.offsetX=this.animationData[this.nameId].frameList[t].frameX,this.offsetY=this.animationData[this.nameId].frameList[t].frameY,this.mFrameWidth=this.animationData[this.nameId].frameList[t].frameWidth,this.mFrameHeight=this.animationData[this.nameId].frameList[t].frameHeight,this.width=this.frameWidth*this.scaleX,this.height=this.frameHeight*this.scaleY,this.framesCount=this.animationData[this.nameId].frameList.length},pain:function(){if(this._visible){this.updateData(),ccb.Stage.ctx.save(),ccb.Stage.ctx.globalCompositeOperation=this.blend,ccb.Stage.ctx.globalAlpha=this.alpha>0?this.alpha:0,ccb.Stage.ctx.translate(this.x,this.y),ccb.Stage.ctx.scale(this.scaleX,this.scaleY),ccb.Stage.ctx.rotate(this.rotation*Math.PI/180),ccb.Stage.ctx.drawImage(this.texture,this.cropX,this.cropY,this.frameWidth,this.frameHeight,-this.mFrameWidth/2-this.offsetX-this.pivotX,-this.mFrameHeight/2-this.offsetY-this.pivotY,this.frameWidth,this.frameHeight);for(var t=0;this.childen.length>t;t++)this.childen[t].pain();ccb.Stage.ctx.restore()}},clone:function(){var t=new ccb.Sprite(this.texture,this.animationData);return t.setTileName(this.getTilName()),t},dispose:function(){this.removeAllChilden(),this.parent=null,this.texture=null,this._visible=!0,this.isPlay=!1,this.loop=!1,this.mouseEnabled=!1,this._userData=null,this._scriptList=null}})}(),function(){ccb.Group=Class({Extends:ccb.DisplayObject,parent:null,blend:"source-over",childen:null,mouseEnabled:!1,_userData:null,initialize:function(){this.blend="source-over",this.childen=[]},addChild:function(t){t instanceof ccb.DisplayObject&&(t.parent=this,this.childen.push(t))},removeChild:function(t){var e=this.childen.indexOf(t);return e>-1?(this.childen.splice(e,1),!0):!1},removeAllChilden:function(){for(var t=0;this.childen.length>t;t++)this.childen[t].dispose&&this.childen[t].dispose(),this.childen[t]=null},pain:function(){if(this._visible){ccb.Stage.ctx.save(),ccb.Stage.ctx.globalCompositeOperation=this.blend,ccb.Stage.ctx.globalAlpha=this.alpha>0?this.alpha:0,ccb.Stage.ctx.translate(this.x,this.y),ccb.Stage.ctx.scale(this.scaleX,this.scaleY),ccb.Stage.ctx.rotate(this.rotation*Math.PI/180);for(var t=0;this.childen.length>t;t++)this.childen[t].pain();ccb.Stage.ctx.restore()}},moveToStage:function(t){this.removeChild(t)&&(t.x=this.x+t.x,t.y=this.y+t.y,t.rotation=this.rotation+t.rotation,t.scaleX=this.scaleX*t.scaleX,t.scaleY=this.scaleY*t.scaleY,ccb.stage.addChild(t))},dispose:function(){this.removeAllChilden(),this._visible=!0,this._userData=null}})}(),function(){ccb.TextFile=Class({Extends:ccb.DisplayObject,parent:null,blend:"source-over",mouseEnabled:!1,_userData:null,string:"",font:"",_font:"",fontSize:"12px",fontFamily:"arial",color:"#000",blod:"",initialize:function(t,e,i){this.init(t,e,i)},init:function(t,e,i){this.string=t,this.color=e,this.blend="source-over",this.font=i||""},updateData:function(){this._font=""==this.font?this.blod+" "+this.fontSize+" "+this.fontFamily:this.font},pain:function(){this._visible&&(this.updateData(),ccb.Stage.ctx.save(),ccb.Stage.ctx.globalCompositeOperation=this.blend,ccb.Stage.ctx.globalAlpha=this.alpha>0?this.alpha:0,ccb.Stage.ctx.translate(this.x,this.y),ccb.Stage.ctx.scale(this.scaleX,this.scaleY),ccb.Stage.ctx.font=this._font,ccb.Stage.ctx.fillStyle=this.color,ccb.Stage.ctx.rotate(this.rotation*Math.PI/180),ccb.Stage.ctx.fillText(this.string,0,0),ccb.Stage.ctx.restore())},clone:function(){var t=new ccb.Sprite(this.texture,this.animationData);return t.setTileName(this.getTilName()),t},dispose:function(){this.parent=null,this._visible=!1,this.mouseEnabled=!1,this._userData=null}})}(),function(){ccb.Frame=Class({name:"",x:0,y:0,width:0,height:0,frameX:0,frameY:0,frameWidth:0,frameHeight:0})}(),function(){ccb.AnimationData=Class({name:"",frameList:null,initialize:function(){this.frameList=[]}})}(),function(){ccb.AnimationXMLReader=Class({frameList:null,animationDataList:null,loadComplete:null,loadTarget:null,xmlHttp:null,initialize:function(){this.loadTarget=this,this.animationDataList=[],this.loadComplete=0},createXMLHttpRequest:function(){window.ActiveXObject?ccb.xmlHttp=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(ccb.xmlHttp=new XMLHttpRequest("Msxml2.XMLHTTP.3.0"))},handleStateChange:function(){4==ccb.xmlHttp.readyState&&200==ccb.xmlHttp.status&&this.loadTarget.readData()},getFromURL:function(t){this.createXMLHttpRequest(),ccb.xmlHttp.onreadystatechange=this.handleStateChange.bind(this),ccb.xmlHttp.open("GET",t,"true"),ccb.xmlHttp.send(null)},addEventListener:function(t){this.loadComplete=t},removeEventListener:function(t){switch(t){case EVENT_COMPLETE:this.loadComplete=null}},readData:function(){var t,e=ccb.xmlHttp.responseXML,i=e.getElementsByTagName("SubTexture"),n="";this.animationDataList=[];for(var s=[],a=0;i.length>a;a++){if(t=i[a],textureName=t.getAttribute("name").substr(0,t.getAttribute("name").length-4),n!=textureName){n=textureName;var c=new ccb.AnimationData;c.name=n,c.frameList=[],s=c.frameList,this.animationDataList.push(c)}var o,r,h=new ccb.Frame;h.name=t.getAttribute("name");var l;h.x=parseInt(t.getAttribute("x"))||0,h.y=parseInt(t.getAttribute("y"))||0,l=parseInt(t.getAttribute("width")),h.width=l||32,o=h.width,l=parseInt(t.getAttribute("height")),h.height=l||32,r=h.height,h.frameX=parseInt(t.getAttribute("frameX"))||0,h.frameY=parseInt(t.getAttribute("frameY"))||0,l=parseInt(t.getAttribute("frameWidth")),h.frameWidth=l||o,l=parseInt(t.getAttribute("frameHeight")),h.frameHeight=l||r,s.push(h)}null!=this.loadComplete&&this.loadComplete(this)}})}(),function(){ccb.Animation=Class({ID:0,_duration:1e-5,_delay:0,_timeSclale:1,_active:null,_reversed:!1,_startTime:0,immediateRender:!1,_paused:!1,vars:null,repeat:1,isStart:!1,target:null,totalTime:0,isComplete:!1,_onAnimateStartFired:!1,_onAnimateStart:null,_onAnimateUpdate:null,_onAnimateEnd:null,callback:null,initialize:function(){this.callback={}},getPaused:function(){return this._paused},setPaused:function(t){return this._paused=t,this},setDelay:function(t){return this.delay=t,this},setRepeat:function(t){return this.repeat=t,this},bind:function(t){return this.target=t,this},run:function(){},onStart:function(t){return this.callback.onAnimateStart=t,this},onUpdate:function(t){return this.callback.onAnimateUpdate=t,this},onEnd:function(t){return this.callback.onAnimateEnd=t,this},dispose:function(){this._onAnimateStart=null,this._onAnimateUpdate=null,this._onAnimateEnd=null,this.isStart=!1,this.isComplete=!0}}),ccb.Tween=Class({Extends:ccb.Animation,starStatus:null,endStatus:null,ease:null,_initData:function(){this.callback={},this.callback.onAnimateStart=function(){},this.callback.onAnimateUpdate=function(){},this.callback.onAnimateEnd=function(){},this._duration=1e-5,this._delay=0,this.totalTime=0,this.starStatus={},this.endStatus={}},initialize:function(t,e,i){if(this._initData(),this.ID=ccb.RunActionClass.ActionCount+1,this.repeat=i.repeat||1,null==t)throw"Cannot tween a null target.";if(this.target=t,null==i)throw"Cannot tween a vars.";return this.vars=i,this._duration=e||1,this._timeSclale=i.tiemScale||1,this.ease=i.ease||function(t,e,i,n){return i*t/n+e},this.setStartStaus(),this.setEndStaus(),this},setStartStaus:function(){var t={};if(null==this.vars.from)for(var e in this.vars.to)null!=this.target["get"+e]?t[e]=this.target["get"+e]():null!=this.target[e]&&(t[e]=this.target[e]);else{for(var e in this.vars.from)t[e]=this.vars.from[e];for(var e in this.vars.to)t[e]===void 0&&(null!=this.target["get"+e]?t[e]=this.target["get"+e]():null!=this.target[e]&&(t[e]=this.target[e]))}this.startStatus=t},setEndStaus:function(){var t={};for(var e in this.vars.to)t[e]=this.vars.to[e];for(var e in this.startStatus)t[e]===void 0&&(t[e]=this.startStatus[e]);this.endStatus=t},getStartStaus:function(){return this.starStatus},getEndStaus:function(){return this.endStatus},run:function(t){this.isStart&&(this._onAnimateStartFired||(this._onAnimateStart&&this._onAnimateStart.call(this),this._onAnimateStartFired=!0),this.totalTime<=this._duration?this.repeat>0||0>this.repeat?this._onAnimateUpdate&&this._onAnimateUpdate.call(this):0==this.repeat&&this._onAnimateEnd&&this._onAnimateEnd.call(this):(this.repeat>0&&(this.totalTime=0,this.repeat--),0==this.repeat&&(this._onAnimateEnd&&this._onAnimateEnd.call(this),this.isStart=!1,this.isComplete=!0)),this.totalTime+=t)},_onAnimateStart:function(){for(var t in this.startStatus)null!=this.target["set"+t]?this.target["set"+t](this.startStatus[t]):null!=this.target[t]&&(this.target[t]=this.startStatus[t]);this.callback.onAnimateStart&&this.callback.onAnimateStart.call(this.target)},_onAnimateUpdate:function(){for(var t in this.endStatus)tem=this.ease(this.totalTime,this.startStatus[t],this.endStatus[t]-this.startStatus[t],this._duration),null!=this.target["set"+t]?this.target["set"+t](tem):null!=this.target[t]&&(this.target[t]=tem);this.callback.onAnimateUpdate&&this.callback.onAnimateUpdate.call(this.target)},_onAnimateEnd:function(){for(var t in this.endStatus)null!=this.target["set"+t]?this.target["set"+t](this.endStatus[t]):null!=this.target[t]&&(this.target[t]=this.endStatus[t]);this.callback.onAnimateEnd&&this.callback.onAnimateEnd.call(this.target)}}),ccb.Tween.To=function(t,e,i){var n=new ccb.Tween(t,e,i);return n},ccb.Action=Class({Extends:ccb.Animation,_initData:function(){this._duration=1e-5,this.totalTime=0,this.isStart=!1,this.isComplete=!1,this._onAnimateStartFired=!1,this.callback={},this.vars=null,this._onAnimateStart=null,this._onAnimateUpdate=null,this._onAnimateEnd=null},initialize:function(t,e,i,n){return this._initData(),this.ID=ccb.RunActionClass.ActionCount+1,this._duration=t,this._onAnimateUpdate=e,this.vars=i||null,this.repeat=n||1,this},run:function(t){this.vars||(this.vars=[t]),this._onAnimateStartFired||(this.callback.onAnimateStart&&this.callback.onAnimateStart(),this._onAnimateStartFired=!0),this.totalTime<this._duration?this.repeat>0||0>this.repeat?this.callback.onAnimateUpdate&&this.callback.onAnimateUpdate.apply(this.target,this.vars):0==this.repeat&&this._onAnimateEnd&&this._onAnimateEnd.apply(this.target,this.vars):(this.repeat>0&&(this.totalTime=0,this.repeat--),0==this.repeat&&(this.callback.onAnimateEnd&&this.callback.onAnimateEnd.apply(this.target,this.vars),this.isStart=!1,this.isComplete=!0)),this.totalTime+=t}}),ccb.Action.CallFunCreate=function(t,e){return new ccb.Action(1e-4,null,e,0).onEnd(t)},ccb.Action.DelayCreate=function(t){return new ccb.Action(t,null,null,1)},ccb.Action.Create=function(t,e,i,n){var s=new ccb.Action(t,e,i,n);return s},ccb.Action.CreateTween=function(t,e,i){var n=new ccb.Tween(t,e,i),s=new ccb.Action(e,null,null,1);return n.callback=s.callback,ccb.RunAction.Create(null,[n]),s},ccb.Action.CreateKeyFrameAnimation=function(t,e){for(var i,n,s=[],a=0;e.length-1>a;a++){n=e[a+1].time-e[a].time;var c=e[a].frame,o=e[a+1].frame;s.push(new ccb.Tween(t,n,{from:c,to:o}))}return i=e[e.length-1].time,ccb.RunAction.Create(null,s),new ccb.Action(i,null,null,1)},ccb.RunActionClass=Class({Extends:ccb.EventDispatcher,STATIC:{ActionCount:0},ActionsLists:null,target:null,isRunAC:!1,stopAction:!1,curFrame:0,totalFrames:0,dt:0,_lastTime:0,_indelay:!1,_listener:null,_initData:function(){this.curFrame=0,this.totalFrames=0,this.isRunAC=!1,this.ActionsLists=[],this._listener={}},initialize:function(){this._initData(),this._listener.onFrameUpdate=this._onFrameUpdate.bind(this),ccb.RunActionClass.ActionCount=0},dispose:function(){ccb.stage.removeEventListener(ccb.Event.Enter_Frame,this._listener.onFrameUpdate),this.isRunAC=!1,this._onFrameUpdate=null,this.ActionsLists=[]},RunAC:function(){ccb.stage.removeEventListener(ccb.Event.Enter_Frame,this._listener.onFrameUpdate),ccb.stage.addEventListener(ccb.Event.Enter_Frame,this._listener.onFrameUpdate),this.isRunAC=!0,this._lastTime=Date.now()},addAction:function(t){ccb.RunActionClass.ActionCount++,t.ID=ccb.RunActionClass.ActionCount,this.ActionsLists.push(t)},removeAction:function(t){var e=this.ActionsLists.indexOf(t);e>-1&&this.ActionsLists.splice(e,1)},getActionId:function(t){for(var e=null,i=0;this.ActionsLists.length>i;i++)if(this.ActionsLists[i]===t){e=this.ActionsLists[i].ID;break}return e},getActionById:function(t){for(var e=null,i=0;this.ActionsLists.length>i;i++)if(this.ActionsLists[i].ID===t){e=this.ActionsLists[i];break}return e},_onFrameUpdate:function(){if(this.isRunAC){var t=Date.now();this.dt=(t-this._lastTime)/1e3,this._lastTime=t;for(var e=0;this.ActionsLists.length>e;e++)if(this.ActionsLists[e].length>0){var i=this.ActionsLists[e][0];i.isStart?i.run(this.dt):(this.ActionsLists[e].splice(0,1),this.ActionsLists[e][0]&&(this.ActionsLists[e][0].isStart=!0))}else this.removeAction(this.ActionsLists[e])}},Create:function(t,e){if(e.length>0){for(var i=0;e.length>i;i++)e[i].target||(e[i].target=t);e[0].isStart=!0,this.addAction(e)}}}),ccb.RunAction=new ccb.RunActionClass,ccb.Ease={Linear:function(t,e,i,n){return i*t/n+e},Quad:{easeIn:function(t,e,i,n){return i*(t/=n)*t+e},easeOut:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOut:function(t,e,i,n){return 1>(t/=n/2)?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}},Cubic:{easeIn:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOut:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOut:function(t,e,i,n){return 1>(t/=n/2)?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}},Quart:{easeIn:function(t,e,i,n){return i*(t/=n)*t*t*t+e},easeOut:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},easeInOut:function(t,e,i,n){return 1>(t/=n/2)?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e}},Quint:{easeIn:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},easeOut:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},easeInOut:function(t,e,i,n){return 1>(t/=n/2)?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}},Sine:{easeIn:function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},easeOut:function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},easeInOut:function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e}},Expo:{easeIn:function(t,e,i,n){return 0==t?e:i*Math.pow(2,10*(t/n-1))+e},easeOut:function(t,e,i,n){return t==n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e},easeInOut:function(t,e,i,n){return 0==t?e:t==n?e+i:1>(t/=n/2)?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e}},Circ:{easeIn:function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOut:function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOut:function(t,e,i,n){return 1>(t/=n/2)?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}},Elastic:{easeIn:function(t,e,i,n,s,a){if(0==t)return e;if(1==(t/=n))return e+i;if(a||(a=.3*n),!s||Math.abs(i)>s){s=i;var c=a/4}else var c=a/(2*Math.PI)*Math.asin(i/s);return-(s*Math.pow(2,10*(t-=1))*Math.sin((t*n-c)*2*Math.PI/a))+e},easeOut:function(t,e,i,n,s,a){if(0==t)return e;if(1==(t/=n))return e+i;if(a||(a=.3*n),!s||Math.abs(i)>s){s=i;var c=a/4}else var c=a/(2*Math.PI)*Math.asin(i/s);return s*Math.pow(2,-10*t)*Math.sin((t*n-c)*2*Math.PI/a)+i+e},easeInOut:function(t,e,i,n,s,a){if(0==t)return e;if(2==(t/=n/2))return e+i;if(a||(a=n*.3*1.5),!s||Math.abs(i)>s){s=i;var c=a/4}else var c=a/(2*Math.PI)*Math.asin(i/s);return 1>t?-.5*s*Math.pow(2,10*(t-=1))*Math.sin((t*n-c)*2*Math.PI/a)+e:.5*s*Math.pow(2,-10*(t-=1))*Math.sin((t*n-c)*2*Math.PI/a)+i+e}},Back:{easeIn:function(t,e,i,n,s){return void 0==s&&(s=1.70158),i*(t/=n)*t*((s+1)*t-s)+e},easeOut:function(t,e,i,n,s){return void 0==s&&(s=1.70158),i*((t=t/n-1)*t*((s+1)*t+s)+1)+e},easeInOut:function(t,e,i,n,s){return void 0==s&&(s=1.70158),1>(t/=n/2)?i/2*t*t*(((s*=1.525)+1)*t-s)+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e}},Bounce:{easeIn:function(t,e,i,n){return i-ccb.Ease.Bounce.easeOut(n-t,0,i,n)+e},easeOut:function(t,e,i,n){return 1/2.75>(t/=n)?i*7.5625*t*t+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOut:function(t,e,i,n){return n/2>t?.5*ccb.Ease.Bounce.easeIn(2*t,0,i,n)+e:.5*ccb.Ease.Bounce.easeOut(2*t-n,0,i,n)+.5*i+e}}}}(),function(){ccb.Particle=Class({source:null,scaleX:1,scaleY:1,rotation:0,speed:0,alpha:1,addScaleX:-.1,addScaleY:-.05,addAlpha:-.01,addA:0,isStart:!1,visible:!1,x:0,y:0,initialize:function(t){this.source=t,this.source._visible=!1,ccb.stage.addEventListener(ccb.Event.Enter_Frame,this.pain.bind(this))},launch:function(){this.scaleX=1,this.scaleY=1,this.rotation=0,this.speed=0,this.alpha=1,this.isStart=!0,this.visible=!0,this.source._visible=!0},clear:function(){this.visible=!1,this.isStart=!1,this.source._visible=!1},pain:function(){this.isStart&&(this.scaleX+=this.addScaleX,this.scaleY+=this.addScaleY,this.alpha+=this.addAlpha,this.rotation+=this.angle,this.source.scaleX=this.scaleX,this.source.scaleY=this.scaleY,this.source.alpha=this.alpha,this.source.x+=Math.cos(this.rotation)*this.speed,this.source.y+=Math.sin(this.rotation)*this.speed,ccb.stage.addChild(this.source),(0>=this.scaleX||0>=this.scaleY||0>=this.alpha)&&this.clear())},dispose:function(){this.isStart=!1,this.visible=!1,ccb.stage.removeChild(this.source),this.source=null}})}(),function(){ccb.ParticleStyle=Class({loop:!1,tileName:null,gotoFrame:0,scopeX:2,scopeY:2,scaleX:1,scaleY:1.3,addScaleX:-.06,addScaleY:-.08,a:1,r:.5,g:.8,b:1,angle:0,rotation:-90*(Math.PI/180),rotationRandom:0,speed:5,alpha:1,addAlpha:-.08,addR:.3,addG:.02,addB:-.003,addA:-.08})}(),function(){ccb.Style_HY=Class({loop:!1,tileName:null,gotoFrame:0,scopeX:0,scopeY:0,scaleX:1,scaleY:1,addScaleX:-.005,addScaleY:-.01,a:1,r:.5,g:.8,b:1,angle:0,rotation:90*(Math.PI/180),rotationRandom:0,speed:0,addR:.3,addG:.02,addB:-.003,addA:-.02})}(),function(){ccb.ParticleEmitter=Class({Extends:ccb.EventDispatcher,isPlay:!1,list:null,style:null,x:0,y:0,fps:0,lastTime:60,initialize:function(t,e){if(this.list=[],this.style=new ccb.ParticleStyle,t instanceof Array)for(var i=0;t.length>i;i++){var n=new ccb.Particle(t[i]);ccb.stage.addChild(t[i]),ccb.stage.addChild(n),this.list.push(n)}else for(var s=0;e>s;s++){var a=new ccb.Sprite(t);a.blend=ccb.Blend.LIGHTER;var n=new ccb.Particle(a);n.isStart=!1,ccb.stage.addChild(a),this.list.push(n)}ccb.stage.addEventListener(ccb.Event.Enter_Frame,this.pain.bind(this)),this.isPlay=!0},pain:function(){if(this.fps){var t=Date.now();(t-this.lastTime)*this.fps>1e3&&(this.lastTime=t,this.sendParticle(this.x,this.y,this.style))}else this.sendParticle(this.x,this.y,this.style)
},sendParticle:function(t,e,i){if(this.isPlay&&this.list)for(var n=0;this.list.length>n;n++)if(0==this.list[n].isStart){var s=this.list[n];s.launch(),s.source.loop=i.loop,i.loop?s.source.play():s.source.stop(),0!=i.gotoFrame&&s.source.gotoAndStop(i.gotoFrame),null!=i.tileName&&s.source.setTileName(i.tileName),s.addA=i.addA,s.angle=i.angle,s.alpha=i.alpha,s.addAlpha=i.addAlpha,s.addScaleX=i.addScaleX,s.addScaleY=i.addScaleY,s.speed=i.speed,s.scaleX=i.scaleX,s.scaleY=i.scaleY,s.source.alpha=i.alpha,s.source.scaleX=i.scaleX,s.source.scaleY=i.scaleY,s.source.x=t+Math.random()*i.scopeX-i.scopeX/2,s.source.y=e+Math.random()*i.scopeY-i.scopeY/2,s.rotation=i.rotation+Math.random()*i.rotationRandom;break}},dispose:function(){this.isPlay=!1,ccb.stage.removeEventListener(ccb.Event.Enter_Frame,this.pain.bind(this));for(var t=0;this.list.length>t;t++)this.list[t].dispose();this.list=null,this.style=null}})}(),function(){ccb.Sound=Class({_volume:1,isPlaying:!1,isPause:!1,location:0,callback:null,source:null,autoPlay:!1,loop:1,canPlay:!1,initialize:function(t,e){return this.callback={},this.autoPlay=e||!1,this.callback.onEndedHandler=this._onEndedHandler.bind(this),this.callback.onPlayingHandler=this._onPlayingHandler.bind(this),this.load(t,this.autoPlay)},load:function(t){var e=new Audio,i=this;return e.addEventListener("loadedmetadata",function(){i.canPlay=!0,i.autoPlay&&i.play(),i.callback.onplay&&i.callback.onplay.call(i)}),e.addEventListener("playing",this.callback.onPlayingHandler),e.addEventListener("ended",this.callback.onEndedHandler),e.addEventListener("error",this.callback.onErrorHandler),e.src=t,e.load(),e.loop=!0,e.autoplay=this.autoPlay,this.source=e,this},play:function(t,e){this.loop=t||1,this.Delay=e||0;var i=this;setTimeout(function(){i.source.play()},1e3*i.Delay),this.isPlaying=!0,this.callback.onplay&&this.callback.onplay.call(this)},stop:function(){this.source.pause(),this.source.currentTime=0,this.location=0,this.isPlaying=!1,this.callback.onstop&&this.callback.onstop.call(this)},_onPlayingHandler:function(){-1!=this.loop&&(0==this.loop&&this.stop(),this.loop--)},_onEndedHandler:function(){},pause:function(){this.source.pause(),this.location=this.source.currentTime,this.isPlaying=!1,this.callback.onpause&&this.callback.onpause.call(this)},getVolume:function(){return this.source.volume},setVolume:function(t){this.source.volume=t,this.onvolumechange()},onvolumechange:function(){this.callback.onvolumeChange&&this.callback.onvolumeChange.call(this)},mute:function(){this.source.mute(),this.callback.onmute&&this.callback.onmute.call(this)},unMute:function(){this.source.unMute(),this.callback.onunMute&&this.callback.onunMute.call(this)},addEventListener:function(t,e){this.callback[t]=e},clone:function(){var t=new Sound(this.sound.src);return t},dispose:function(){this.isPlaying=!1,this.isPause=!1,this.location=0,this.callback=null,this.source=null,this.autoPlay=!1,this.loop=0,this.canPlay=!1}})}(),function(){ccb.SoundGroup=Class({src:"",group:null,maxbuffer:100,initialize:function(t){this.group=[],this.src=t},add:function(t){if(!(this.group.length>this.maxbuffer)){var e=new ccb.Sound(t);return this.group.push(e),e}},match:function(t){return this.group.indexOf(t)},remove:function(t){var e=this.match(t);return e>-1?(this.group[e].dispose&&this.group[e].dispose(),this.group.splice(e,1)):void 0},removeAll:function(){for(var t=0;this.group.length>t;t++)this.group[t].dispose&&this.group[t].dispose();this.group=[]},play:function(t,e){for(var i=0;this.group.length>i;i++)if(!this.group[i].isPlaying)return this.group[i].play(t,e),this.group[i];if(0==i||i==this.group.length){var n=this.add(this.src);return n.play(t,e),n}},stop:function(){for(var t=0;this.group.length>t;t++)this.group[t].isPlaying&&this.group[t].stop()},pause:function(){for(var t=0;this.group.length>t;t++)this.group[t].isPlaying&&this.group[t].pause()},mute:function(){for(var t=0;this.group.length>t;t++)this.group[t].isPlaying&&this.group[t].mute()},unMute:function(){for(var t=0;this.group.length>t;t++)this.group[t].isPlaying&&this.group[t].unMute()},getVolume:function(){return this.group[0].volume},setVolume:function(t){for(var e=0;this.group.length>e;e++)this.group[e].volume=t},dispose:function(){this.src=null;for(var t=0;this.group.length>t;t++)this.group[t].dispose&&this.group[t].dispose();this.group=null}}),ccb.SoundsManager=Class({soundsGroups:null,initialize:function(){this.soundsGroups={}},add:function(t,e){if("string"==typeof e)e=new ccb.SoundGroup(e);else if("object"!=typeof e)return;this.soundsGroups[t]||(this.soundsGroups[t]=e)},remove:function(t){var e=this.group(t);return this.soundsGroups[t]=null,e},group:function(t){return this.soundsGroups[t]},play:function(){for(var t in this.soundsGroups)this.soundsGroups[t].play()},stop:function(){for(var t in this.soundsGroups)this.soundsGroups[t].stop()},pause:function(){for(var t in this.soundsGroups)this.soundsGroups[t].pause()},mute:function(){for(var t in this.soundsGroups)this.soundsGroups[t].mute()},unMute:function(){for(var t in this.soundsGroups)this.soundsGroups[t].unMute()},dispose:function(){for(var t in this.soundsGroups)this.soundsGroups[t].dispose();this.soundsGroups=null}})}();